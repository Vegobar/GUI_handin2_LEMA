@*@model IEnumerable<GUI_Try2222.Data.ExpectedArrival>*@
@model GUI_Try2222.Models.MappedAllData

<!DOCTYPE html>

<head>


    @{
        ViewData["Title"] = "CookingDetails";


    }



</head>

<h1 class="guestHead">GuestList</h1>
<button onClick="window.location.reload();">Refresh Page</button>

<h2>Show items but selecting a date and press enter</h2>

<form method="POST">
    <label for="myDate">Date goes here</label>
    <input for="myDate" type="date" id="myDate" name="myDate" />
    <input type="submit" />
</form>

@if (Model.NewDate == null)
{
    <h1>Expected guests today @DateTime.Today.ToString("dd/MM/yyyy")</h1>
}
else
{
    <h1>Expected guests for date @Model.NewDate.ToString("dd/MM/yyyy")</h1>
}

<table class="table">
    <thead>
        <tr>
            <th>
                Adults
            </th>
            <th>
                Children
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @{
            var adultsTotal = 0;
            var childrenTotal = 0;
        }


        @foreach (var items in Model.expectexArrival)
        {
            if (Model.NewDate == null)
            {
                if (items.ExpenseDate == DateTime.Today)
                {
                    adultsTotal += items.Adults;
                    childrenTotal += items.Children;
                }
            }
            else if (items.ExpenseDate == Model.NewDate)
            {
                adultsTotal += items.Adults;
                childrenTotal += items.Children;
            }
        }

        <tr>
            <td>
                @Html.DisplayFor(modelItem => adultsTotal)
            </td>
            <td>
                @Html.DisplayFor(modelItem => childrenTotal)
            </td>
        </tr>

</table>

@if (Model.NewDate == null)
{
    <h1>Not checked in @DateTime.Today.ToString("dd/MM/yyyy")</h1>
}
else
{
    <h1>Not checked in @Model.NewDate.ToString("dd/MM/yyyy")</h1>
}

<table class="table">
    <thead>
        <tr>
            <th>
                Adults
            </th>
            <th>
                Children
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @{
            var adultsTotal_not_checked_in = 0;
            var childrenTotal_not_checked_in = 0;
            var checkedInAdults = 0;
            var checkedInChildren = 0;

        }

            @foreach (var items in Model.booking)
            {
                if (Model.NewDate == DateTime.Today)
                {
                    checkedInAdults += items.Adults;
                    checkedInChildren += items.Children;
                }
            }

            @foreach (var items in Model.expectexArrival)
            {
                if (Model.NewDate == null)
                {
                    if (items.ExpenseDate == DateTime.Today)
                    {
                        adultsTotal_not_checked_in += items.Adults;
                        childrenTotal += items.Children;
                    }
                }
                else if (items.ExpenseDate == Model.NewDate)
                {
                    adultsTotal_not_checked_in += items.Adults;
                    childrenTotal_not_checked_in += items.Children;
                }
            }

            <tr>
                <td>
                    @(adultsTotal_not_checked_in - checkedInAdults)
                </td>
                <td>
                    @(childrenTotal_not_checked_in - checkedInChildren)
                </td>
            </tr>

</table>


<h1>Checked in @DateTime.Today.ToString("dd/MM/yyyy")</h1>
<table class="table">
    <thead>
        <tr>
            <th>
                Adults
            </th>
            <th>
                Children
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>

        @foreach (var item in Model.booking)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Adults)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Children)
                </td>
                <td>
                </td>
            </tr>
        }
</table>

